{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '46991464-598feb9117dc71abe61f88b6f';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\n// export async function fetchImages(query, page = 1) {\n//   const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n//     query\n//   )}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${page}`;\n//   const response = await axios.get(url);\n\n//   if (response.status !== 200) {\n//     throw new Error('Failed to fetch images');\n//   }\n\n//   return {\n//     images: response.data.hits.map(\n//       ({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         comments,\n//         views,\n//         downloads,\n//       }) => ({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         comments,\n//         views,\n//         downloads,\n//       })\n//     ),\n//     totalHits: response.data.totalHits,\n//   };\n// }\n\nexport async function fetchImages(query, page = 1) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${page}`;\n  const response = await axios.get(url);\n\n  if (response.status !== 200) {\n    throw new Error('Failed to fetch images');\n  }\n\n  return {\n    images: response.data.hits.map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        comments,\n        views,\n        downloads,\n      }) => ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        comments,\n        views,\n        downloads,\n      })\n    ),\n    totalHits: response.data.totalHits,\n  };\n}\n","// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\n// export function createGalleryMarkup(images, shoudAppend = false) {\n//   const galleryContainer = document.querySelector('.image-gallery');\n//   const markup = images\n//     .map(\n//       image => `\n//         <div class=\"image-item\">\n//             <a href=\"${image.largeImageURL}\">\n//                 <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" class=\"gallery-img\" />\n//             </a>\n//             <div class=\"image-info\">\n//                 <h5 class =\"text\"> <span class=\"icon-data\">üíó Likes: ${image.likes} </span></h5>\n//                 <h5 class =\"text\"> <span class=\"icon-data\">üó®Ô∏è Comments: ${image.comments}</span></h5>\n//                 <h5 class =\"text\"><span class=\"icon-data\">üëÄ Views: ${image.views}</span></h5>\n//                 <h5 class =\"text\"><span class=\"icon-data\">‚¨áÔ∏è Downloads: ${image.downloads}</span></h5>\n//             </div>\n//         </div>\n//     `\n//     )\n//     .join('');\n\n//   if (shoudAppend) {\n//     galleryContainer.insertAdjacentHTML('beforeend', markup);\n//   } else {\n//     galleryContainer.innerHTML = markup;\n//   }\n// }\n\n// export function displayError(message) {\n//   iziToast.error({\n//     title: 'Error',\n//     message: message,\n//     position: 'bottomCenter',\n//     color: 'red',\n//   });\n// }\n\nexport function createGalleryMarkup(images, shoudAppend = false) {\n  const galleryContainer = document.querySelector('.image-gallery');\n  const markup = images\n    .map(\n      image => `\n        <div class=\"image-item\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"image-info\">\n                <h5 class =\"text\"> <span class=\"icon-data\">üíó Likes: ${image.likes} </span></h5>\n                <h5 class =\"text\"> <span class=\"icon-data\">üó®Ô∏è Comments: ${image.comments}</span></h5>\n                <h5 class =\"text\"><span class=\"icon-data\">üëÄ Views: ${image.views}</span></h5>\n                <h5 class =\"text\"><span class=\"icon-data\">‚¨áÔ∏è Downloads: ${image.downloads}</span></h5>\n\n            </div>\n        </div>\n    `\n    )\n    .join('');\n\n  if (shoudAppend) {\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n  } else {\n    galleryContainer.innerHTML = markup;\n  }\n}\n\nexport function displayError(message) {\n  iziToast.show({\n    title: 'Error',\n    message: message,\n    position: 'bottomCenter',\n    color: 'red',\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { createGalleryMarkup, displayError } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryContainer = document.querySelector('.image-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.classList.add('load-more');\nloadMoreBtn.textContent = 'Load more';\n\ngalleryContainer.insertAdjacentElement('afterend', loadMoreBtn);\n\nlet lightbox;\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = searchForm.querySelector('.search-form-input')?.value.trim();\n\n  if (!query) {\n    displayError('Please enter a valid search query');\n    return;\n  }\n  page = 1;\n  loadMoreBtn.style.display = 'none';\n  galleryContainer.innerHTML = '';\n\n  loader.style.display = 'block';\n\n  try {\n    const { images, totalHits: fetchedTotalHits } = await fetchImages(\n      query,\n      page\n    );\n    totalHits = fetchedTotalHits;\n\n    createGalleryMarkup(images);\n    lightbox = new SimpleLightbox('.image-gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n\n    if (totalHits > page * 15) loadMoreBtn.style.display = 'block';\n  } catch (error) {\n    displayError(error.message);\n  } finally {\n    loader.style.display = 'none';\n  }\n});\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  loader.style.display = 'block';\n  try {\n    const { images } = await fetchImages(query, page);\n    createGalleryMarkup(images, true);\n    lightbox.refresh();\n    if (page * 15 >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      displayError('No more results could be found');\n    } else {\n      smoothScroll();\n    }\n  } catch (error) {\n    displayError(error.message);\n  } finally {\n    loader.style.display = 'none';\n  }\n});\nfunction smoothScroll() {\n  const { height: cardHeight } =\n    galleryContainer.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n// galleryContainer.insertAdjacentElement('afterend', loadMoreBtn);\n\n// let lightbox = new SimpleLightbox('.gallery a');\n// let query = '';\n// let page = 1;\n// let totalHits = 0;\n\n// searchForm.addEventListener('submit', async event => {\n//   event.preventDefault();\n//   query = searchForm.querySelector('.search-form-input')?.value.trim();\n\n//   if (!query) {\n//     displayError('Please enter a valid search query');\n//     return;\n//   }\n\n//   page = 1;\n//   loadMoreBtn.style.display = 'none';\n//   galleryContainer.innerHTML = '';\n//   loader.style.display = 'block';\n\n//   try {\n//     const { images, totalHits: fetchedTotalHits } = await fetchImages(\n//       query,\n//       page\n//     );\n//     totalHits = fetchedTotalHits;\n\n//     createGalleryMarkup(images);\n//     lightbox.refresh();\n//     if (totalHits > page * 15) loadMoreBtn.style.display = 'block';\n//   } catch (error) {\n//     displayError(error.message);\n//   } finally {\n//     loader.style.display = 'none';\n//   }\n// });\n\n// loadMoreBtn.addEventListener('click', async () => {\n//   page += 1;\n//   loader.style.display = 'block';\n\n//   try {\n//     const { images } = await fetchImages(query, page);\n//     createGalleryMarkup(images, true);\n//     lightbox.refresh();\n\n//     if (page * 15 >= totalHits) {\n//       loadMoreBtn.style.display = 'none';\n//       displayError(\n//         \"We're sorry, but you've reached the end of search results.\"\n//       );\n//     } else {\n//       smoothScroll();\n//     }\n//   } catch (error) {\n//     displayError(error.message);\n//   } finally {\n//     loader.style.display = 'none';\n//   }\n// });\n\n// function smoothScroll() {\n//   const { height: cardHeight } =\n//     galleryContainer.firstElementChild.getBoundingClientRect();\n//   window.scrollBy({\n//     top: cardHeight * 2,\n//     behavior: 'smooth',\n//   });\n// }\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","url","response","axios","webformatURL","largeImageURL","tags","likes","comments","views","downloads","createGalleryMarkup","images","shoudAppend","galleryContainer","markup","image","displayError","message","searchForm","loader","loadMoreBtn","lightbox","totalHits","event","_a","fetchedTotalHits","SimpleLightbox","error","smoothScroll","cardHeight"],"mappings":"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"}